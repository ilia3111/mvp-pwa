<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø³Ø§Ù…Ø§Ù†Ù‡ Ù…Ø®ØµÙˆØµ 122</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      background: #222;
      color: #fff;
      padding: 15px;
    }
    h1 { margin: 0; font-size: 22px; }

    main { padding: 20px; }

    .box {
      background: #fff;
      padding: 15px;
      margin: 15px auto;
      border-radius: 12px;
      max-width: 400px;
    }

    a.button, button {
      display: block;
      width: 90%;
      max-width: 260px;
      margin: 8px auto;
      background: #0066cc;
      color: #fff;
      padding: 10px;
      border: none;
      border-radius: 10px;
      text-decoration: none;
      cursor: pointer;
    }

    #scoreBox {
      background: #111;
      color: #0f0;
      padding: 10px;
      border-radius: 12px;
      display: inline-block;
    }

    .notice {
      background: #ffeb3b;
      padding: 10px;
      margin: 10px;
      border-radius: 10px;
      display: none;
      position: relative;
    }
    .close-notice {
      position: absolute;
      left: 10px;
      top: 5px;
      cursor: pointer;
    }

    footer {
      background: #ddd;
      padding: 10px;
      font-size: 14px;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<header>
  <h1>ğŸŒŸ Ø³Ø§Ù…Ø§Ù†Ù‡ Ù…Ø®ØµÙˆØµ 122 ğŸŒŸ</h1>
</header>

<!-- Ø§Ø¹Ù„Ø§Ù† -->
<div id="noticeBox" class="notice">
  <span class="close-notice" onclick="closeNotice()">âœ–</span>
  <span id="noticeText"></span>
</div>

<main>

  <div class="box">
    <h2>Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯</h2>
    <p>Ø¯Ø± Ø§ÛŒÙ† Ø³Ø§Ù…Ø§Ù†Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ú©Ø§Ø± Ø®ÛŒØ± Ù…Ø´Ø§Ø±Ú©Øª Ú©Ø±Ø¯Ù‡ Ùˆ Ø§Ù…ØªÛŒØ§Ø² Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯.</p>
    <a class="button" href="donation.html">ğŸ¤² Ú©Ù…Ú© Ù…Ø±Ø¯Ù…ÛŒ</a>
  </div>

  <div class="box">
    <h3>â­ Ø§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§</h3>
    <div id="scoreBox">
      Ø§Ù…ØªÛŒØ§Ø²: <b id="score">0</b>
    </div>
    <button onclick="dailyReward()">ğŸ ÙˆØ±ÙˆØ¯ Ø±ÙˆØ²Ø§Ù†Ù‡ (+5)</button>
    <button onclick="addScore(10)">ğŸ¤² Ú©Ù…Ú© Ù…Ø±Ø¯Ù…ÛŒ (+10)</button>
    <button onclick="addScore(3)">ğŸ“º Ø¯ÛŒØ¯Ù† ØªØ¨Ù„ÛŒØº (+3)</button>
  </div>

  <!-- âœ… Ù¾Ù„ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§ -->
  <div class="box">
    <h3>ğŸ“¡ Ù¾Ù„ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§</h3>
    <p>Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù¾ÛŒØ§Ù…â€ŒØ±Ø³Ø§Ù†â€ŒÙ‡Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§Ø´ÛŒØ¯</p>

    <button onclick="openWithFallback(
      'eitaa://ehsan_sheikh',
      'https://eitaa.com/ehsan_sheikh'
    )">ğŸ“© Ø§Ø±ØªØ¨Ø§Ø· Ø¯Ø± Ø§ÛŒØªØ§</button>

    <button onclick="openWithFallback(
      'rubika://l/ehsan_sheikh',
      'https://rubika.ir/ehsan_sheikh'
    )">ğŸ’¬ Ø§Ø±ØªØ¨Ø§Ø· Ø¯Ø± Ø±ÙˆØ¨ÛŒÚ©Ø§</button>
  </div>

</main>

<footer>
  ğŸŒ™ Ø´ÙØ§ÙÛŒØª Ú©Ø§Ù…Ù„ | Ø¯Ø±ÛŒØ§ÙØª Ú©Ù…Ú©â€ŒÙ‡Ø§ ØªÙˆØ³Ø· Ø§Ù…Ù†Ø§ÛŒ Ù…Ø³Ø¬Ø¯
</footer>

<script>
  // notice
  fetch('notice.json')
    .then(r => r.json())
    .then(d => {
      if (localStorage.getItem('noticeClosed') !== d.id) {
        noticeText.innerText = d.message;
        noticeBox.style.display = 'block';
      }
    });

  function closeNotice(){
    noticeBox.style.display = 'none';
    localStorage.setItem('noticeClosed', Date.now().toString());
  }

  // deep link
  function openWithFallback(app, web){
    location.href = app;
    setTimeout(() => location.href = web, 1000);
  }

  // score system
  let score = Number(localStorage.getItem('userScore')) || 0;
  let lastDaily = localStorage.getItem('lastDailyReward');

  updateScore();

  function updateScore(){
    scoreElem = document.getElementById('score');
    scoreElem.innerText = score;
    localStorage.setItem('userScore', score);
  }

  function addScore(n){
    score += n;
    updateScore();
  }

  function dailyReward(){
    let today = new Date().toDateString();
    if(lastDaily === today){
      alert('âœ… Ø§Ù…Ø±ÙˆØ² Ú¯Ø±ÙØªÛŒ');
      return;
    }
    score += 5;
    lastDaily = today;
    localStorage.setItem('lastDailyReward', today);
    updateScore();
    alert('ğŸ‰ Ûµ Ø§Ù…ØªÛŒØ§Ø² Ú¯Ø±ÙØªÛŒ');
  }
</script>

</body>
</html>
